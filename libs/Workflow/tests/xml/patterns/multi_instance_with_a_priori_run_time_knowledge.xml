<?xml version="1.0" encoding="UTF-8"?> 
<process-definition name="flow" revision="1.0">
    <description>Pattern 14 (Multiple Instances with a priori Run-Time Knowledge)</description>

    <!-- Start with an implicit simple split. -->
    <startactivity>
        <successor>multi_instance_1</successor>
    </startactivity>

    <!--
    Split into 2 branches, and implicitly split twice in addition.
    Note that the number of branches is read from the attribute "two",
    which may change at runtime.
    -->
    <multiinstance name="multi_instance_1" times-field="two">
        <successor>activity_g1</successor>
    </multiinstance>

    <!-- Parallel activities. -->
    <activity name="activity_g1">
        <successor>activity_g2</successor>
    </activity>
    <activity name="activity_g2">
        <successor>struct_synch_merge_1</successor>
    </activity>

    <!-- Structured synchronizing merge. -->
    <synchronization name="struct_synch_merge_1" context="multi_instance_1">
        <successor>last</successor>
    </synchronization>

    <!-- A final activity. -->
    <synchronization name="last">
        <successor>end</successor>
    </synchronization>
</process-definition>
