<?xml version="1.0" encoding="UTF-8"?> 
<process-definition name="flow" revision="1.0">
    <description>Pattern 17 (Interleaved Parallel Routing)</description>

    <!-- Start with an implicit simple split. -->
    <starttask>
        <successor>one</successor>
        <successor>two</successor>
    </starttask>

    <!-- Branch 1 -->
        <task name="one">
            <lock>one_task_at_a_time</lock>
            <successor>join</successor>
        </task>
    <!-- End branch 1 -->

    <!-- Branch 2 -->
        <task name="two">
            <lock>one_task_at_a_time</lock>
            <successor>three</successor>
        </task>
        <task name="three">
            <lock>one_task_at_a_time</lock>
            <successor>join</successor>
        </task>
    <!-- End branch 2 -->

    <!-- Join all branches. -->
    <join name="join">
        <successor>last</successor>
    </join>

    <!-- A final task. -->
    <task name="last">
        <successor>end</successor>
    </task>
</process-definition>
